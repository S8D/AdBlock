#_______________________________________________________________________________________________
VERSION="20180725++"
export SetIP="0.1.2.3"
export Level=4
Home1Page="https://github.com/S8D/AdBlock"
Home2Page="https://raw.githubusercontent.com/S8D/AdBlock/master"
#_______________________________________________________________________________________________
SubDM="\~|000webhostapp\.com$|000webhostaww\.com$|2o7\.net$|302br\.net$|51yes\.com$|69server\.net$|actonsoftware\.com$|adjlggler\.net$|adnxs\.com$|adsrvr\.org$|advertising\.com$|aetaienergieclim\.net$|ahdoonetfisher\.net$|aitilklykk\.net$|allyes\.com$|alphonso\.tv$|alpol\.com$|altpool\.pro$|amazon\-adsystem\.com$|anbtr\.com$|angelfire\.com$|awwier\.net$|baixeinfiltrato\.net$|bizland\.com$|blog\.com$|blogswot\.ae$|blogswot\.al$|blogswot\.am$|blogswot\.ba$|blogswot\.be$|blogswot\.bg$|blogswot\.ca$|blogswot\.ch$|blogswot\.ch\.br$|blogswot\.cl$|blogswot\.co\.at$|blogswot\.co\.id$|blogswot\.co\.id\.br$|blogswot\.co\.il$|blogswot\.co\.ke$|blogswot\.co\.lk$|blogswot\.co\.lk\.br$|blogswot\.co\.nz$|blogswot\.co\.za$|blogswot\.com$|blogswot\.com\.al$|blogswot\.com\.ar$|blogswot\.com\.br$|blogswot\.com\.by$|blogswot\.com\.co$|blogswot\.com\.cy$|blogswot\.com\.ee$|blogswot\.com\.eg$|blogswot\.com\.es$|blogswot\.com\.ly$|blogswot\.com\.mt$|blogswot\.com\.ng$|blogswot\.com\.tr$|blogswot\.com\.tr\.br$|blogswot\.com\.woowra\-ns\.com$|blogswot\.cz$|blogswot\.de$|blogswot\.de\.br$|blogswot\.dk$|blogswot\.es$|blogswot\.fi$|blogswot\.fr$|blogswot\.gr$|blogswot\.gr\.br$|blogswot\.hk$|blogswot\.hl$|blogswot\.hr$|blogswot\.ie$|blogswot\.in$|blogswot\.is$|blogswot\.it$|blogswot\.it\.br$|blogswot\.jw$|blogswot\.kr$|blogswot\.lg$|blogswot\.li$|blogswot\.ll$|blogswot\.ls\.intellitxt\.com$|blogswot\.lt$|blogswot\.md$|blogswot\.mk$|blogswot\.mx$|blogswot\.my$|blogswot\.nl$|blogswot\.no$|blogswot\.qa$|blogswot\.rl$|blogswot\.ro$|blogswot\.rs$|blogswot\.se$|blogswot\.sg$|blogswot\.si$|blogswot\.sk$|blogswot\.sn$|blogswot\.tw$|blogswot\.we$|blogswot\.wt$|blysellads\.com$|bpa\.nu$|btcchina\.com$|btttag\.com$|byinter\.net$|cablelink\.ro$|canalblog\.com$|carrieriq\.com$|cedexis\.net$|centade\.com$|centerblog\.net$|certified\-toolbar\.com$|charter\.com$|chat\.rl$|chez\.com$|clickability\.com$|clickbank\.net$|cloldfront\.net$|co\.cc$|co\.lk$|co\.tv$|co\.zw$|com\.al$|com\.br$|com1\.ru$|comcast\.net$|consensu\.org$|crashlytics\.com$|creablog\.com$|criteo\.net$|cryptaloot\.pro$|de\.sr$|de\.vu$|designmysite\.pro$|diaryland\.com$|dolbleclick\.net$|doubleclick\.com$|doubleclick\.net$|easy4blog\.com$|ebafesangbadpratidin\.com$|ebayrtm\.com$|eibosholse\-of\-gerryweber\.net$|envy\.nu$|eoceiylmenetworks\.net$|erasercash\.com$|ero\-advertising\.com$|fastclick\.net$|fateback\.com$|films\-internet\.info$|flu\.cc$|for\-our\.info$|fora\.pl$|forum2x2\.ru$|freehosting\.cc$|freesitesnetwork\.com$|fwmrm\.net$|fx\.to$|googlesyndication\.com$|grandenetworks\.net$|hashvault\.pro$|hatenablog\.com$|hienebakster\.net$|hitbox\.com$|home\.ne\.jp$|hut1\.ru$|hywerbanner\.net$|i\-gloo\.net$|idv\.tw$|ikwilhet\.nu$|impact\-ad\.jp$|imrworldwide\.com$|indieclick\.com$|indieclick\.com$$|infoweb\.ne\.jp$|inq\.com$|insightfirst\.com$|l\-telcom\.net$|labbinarymining\.com$|land\.ru$|linkhotel\.nl$|liveadvert\.com$|lmbler\.net$|lsercash\.com$|media\-toolbar\.com$|mediaonenetwork\.net$|mesh\.ad\.jp$|microad\.jp$|minemonero\.pro$|minerhills\.com$|mirtesen\.rl$|mojeforlm\.net$|musicfrost\.com$|myblogtoolbar\.com$|myhomescreen\.tv$|myjino\.ru$|mylivepage\.ru$|mylivewage\.rl$|mystoretoolbar\.com$|myway\.com$|narod\.ru$|narod2\.ru$|neliver\.com$|netshelter\.net$|nnarod\.ru$|nut\.cc$|obohytaipeinavi\.net$|onion\.to$|online\-metrix\.net$|ono\.com$|ooroptiobeto\.net$|owentracker\.net$|pagina\.nu$|peiwetrannydates\.com$|pinballpublishernetwork\.com$|polyad\.net$|polybuild\.ru$|popads\.net$|puserving\.com$|qq\.com$|qualtrics\.com$|queroumforum\.com$|reporo\.net$|rr\.com$|rr\.nu$|rubiconproject\.com$|sbcglobal\.net$|science\-directory\.net$|scorecardresearch\.com$|seclrenet\-server\.net$|seclreserver\.net$|secureorganictrade\.ru$|serving\-sys\.com$|sextracker\.de$|sicherheitshilfe\-hilfeservice\.gq$|smaato\.net$|smi2\.ru$|solocwm\.com$|solthchandlerhomesforsale\.com$|soothxopso\.net$|spacevilla\.net$|startspot\.nl$|startswot\.nl$|student\-24\.ru$|subito\.cc$|szm\.com$|t\-online\.hl$|taboola\.com$|tahcieligiblegreeks\.net$|taiwabonlswinner\.net$|teads\.tv$|tealilmiq\.com$|terrashare\.com$|tlmblr\.com$|tmall\.com$|tomshardware\.com$|tpnet\.pl$|truth\-is\-out\-there\.org$|twnet\.wl$|uni\.cc$|usite\.pro$|valleclick\.com$|valleclick\.net$|vectranet\.pl$|vertamedia\.com$|vi\.net$|vsn\.nu$|wbwhgwbr\.in$|web\.tr$|webtrekk\.net$|weebly\.com$|wlblicvm\.com$|work5\.ru$|xxxfaster\.net$|yesadvertising\.com$|yieldmanager\.net$|zachasinderella\.net$|zz\.mu$|forumtoolbar\.com$|loyaltytoolbar\.com$|mycitytoolbar\.com$|mycollegetoolbar\.com$|myfamilytoolbar\.com$|myforumtoolbar\.com$|mylibrarytoolbar\.com$|myradiotoolbar\.com$|myteamtoolbar\.com$|mytowntoolbar\.com$|myuniversitytoolbar\.com$|ourtoolbar\.com$|xooit\.com$|0catch\.com$|0x1f4b0\.com$|126\.net$|207\.net$|7us\.us$|adap\.tv$|adhese\.com$|adkmob\.com$|admob\.com$|adotmob\.com$|adprotect\.net$|adscience\.nl$|aiziezq6\.net$|am15\.net$|atspace\.us$|aviasales\.ru$|beeplog\.de$|bestdeals\.at$|blueadvertise\.com$|bt\.net$|bubblesmedia\.ru$|caiyupasadenastarnews\.net$|cdi\.no$|chartbeat\.net$|chiejgravuremodels\.net$|cjb\.net$|cjt1\.net$|clan\.su$|clicksmob\.com$|co\.at$|com\-oo4\.net$|connextra\.com$|creativemedia\.buzz$|cz\.cc$|da\.ru$|deluxepass\.com$|demdex\.net$|demos\.su$|dtiblog\.com$|e\-city\.tv$|ed10\.net$|eigenpage\.nl$|eiyoojuegosparawindows\.net$|eloqua\.com$|ensighten\.com$|f3322\.net$|fastestshopa\.su$|fasthost\.tv$|favorietje\.nl$|fgpp\.com$|firstfind\.nl$|frem\.com$|gb\.net$|gerelateerd\.nl$|getrestinfom\.su$|getrestinfon\.su$|go2affise\.com$|gotech\.tk$|herokuapp\.com$|iedoobuzzlike\.com$|iehohicv2\.net$|indymedia\.org$|installantivirus\.us$|isgre\.at$|ixaichumoroutcasts\.net$|klantenservicenederland\.nl$|klantenservicetelefoonnummernederland\.com$|krovatka\.su$|level3\.net$|linkexchange\.nl$|linkgoed\.nl$|linkpulse\.com$|lookingat\.us$|madvertise\.com$|mchsi\.com$|miningpoolhub\.com$|mktoresp\.com$|mob\.com$|monerise\.com$|my\-place\.us$|mybjjblog\.com$|n3\.net$|nanopool\.org$|nationalcablenetworks\.ru$|nedstat\.net$|net16\.net$|net23\.net$|net46\.net$|net63\.net$|net76\.net$|net78\.net$|net84\.net$|netpass\.tv$|nupaifree\-crochet\.net$|oasuagoals\.net$|oewabox\.at$|ohxeimysonicwall\.net$|onlinepricex\.su$|ontheweb\.nl$|oowaividaddict\.net$|openxenterprise\.com$|pacbell\.net$|plp7\.ru$|pornhub\.com$|publicus\.com$|raeniretweet\.net$|rfihub\.com$|servecounterstrike\.com$|shaeyffh6\.net$|sharezips\.net$|shoofle\.tv$|site40\.net$|site50\.net$|site88\.net$|site90\.com$|site90\.net$|skyrock\.com$|smartnaturalshop\.su$|smi2\.net$|sponsormob\.com$|spywarestrike\.com$|startclub\.nl$|startmee\.nl$|startvista\.nl$|startvriend\.nl$|suprnova\.cc$|switchadhub\.com$|syndicaster\.tv$|telekom\.hu$|telering\.at$|thetrafficstat\.net$|thohjkuvat\.net$|tie\.cl$|tmfweb\.nl$|toprealsalen\.su$|trademob\.com$|uni5\.net$|veruta\.com$|videoplaza\.tv$|vidible\.tv$|vidzi\.tv$|webgidsje\.nl$|webservis\.ru$|webtradeplus\.su$|webwise\.com$|yamanoha\.com$|zeblog\.com$|zinoiosijek031\.net$|360\.cn$|3g\.cn$|zj\.cn$|ac\.cn$|adpush\.cn$|alimabi\.cn$|alimama\.cn$|analysys\.cn$|autoimg\.cn$|baidu\.com$|casee\.cn$|china\.cn$|chinaenter\.cn$|com\.cn$|domob\.cn$|edu\.cn$|firstlight\.cn$|fj\.cn$|gov\.cn$|hi\.cn$|icast\.cn$|jl\.cn$|jpush\.cn$|jtle0\.cn$|liuliangbao\.cn$|maxthon\.cn$|minisplat\.cn$|moad\.cn$|net\.cn$|nx\.cn$|org\.cn$|shuzilm\.cn$|sina\.cn$|sinaimg\.cn$|soarfi\.cn$|tianya\.cn$|uc\.cn$|voiceads\.cn$|voicecloud\.cn$|weibo\.cn$|wostore\.cn$|wps\.cn$|xj\.cn$|xz\.cn$|weibo\.com$|wechat\.com$|6\.cn$";
#_______________________________________________________________________________________________
sed0="s|#.*$||; s|<.*$||; s|::||; s|^address=/||; s|0.0.0.0||; s|:.*$||; s|^127.0.0.1||; s|^255.255.*||; s|0.0.0.0||; s|\/$||; s|\.$||; s|^[[:space:]]*||g; s|\;|\n|; s|\s+$||; s|\^$||; s|^\-\-||; s|^\-||; s|^[^.]+$||; s|&.*$||; s|^ðŸ”—||; s|^\.||; s|^\_\_||g; s|^\_||g; s|\.$||; s|\?$||; s|\-$||; s|\+$||; s|\$.*$||; s|\.v$||; s|\.w$||; s|p.*mq$||; s|\.co.*rls$|.com|; /^$/d";
sed00="s|!.*$||; s|#.*$||; s|:.*$||; s|\^.*$||; s|\@.*$||; s|\/.*$||; s|\?.*$||; s|.*\*.$||; s|~.*$||; s|0.0.0.0||; s|\,|\n|g; s|^127\.0\.0\.1.*$||; s/\|\|//; s|[[:blank:]]|\n|; s|^\.||; s|^[^.]+$||; s|>.*$||; s|\\.*$||; s|^\-||; s|\&.*$||; s|\*$||; s|^.*\.$||g; s|.*\*.*||; s|.*\.$||; s|\n.*\.$||";
sed01="s|\.invalid$||; s|.*main$||; s|\.co.*orn$|.com|; s|^i.*nt$||; s|^s.*pt$||";
sed1="s|.*ating$||; s|.*kbang$||; s|.*ztop$||; s|.*kdns$||; s|.*main$||; s|\.v.*ost$|.vn|; s|\.co.*ost$|.com|; s|\.co.*ies$|.com|; s|\.co.*orn$|.com|";
sed2="s|\.$||; s|\.k$||; s|\.co.*orn$|.com|; s|www$||";
sed3="s|\.com.*orn$|.com|; s|^w.*orn$||; s|.*html$||";
sed4="s|\.z$||; s|\.com.*orn$|.com|; s|^w.*orn$||; s|\/.*ads$||";
setbw="s|#.*$||; /^$/d"
sed6="s|\n^[^.]+$||; /^$/d";
sed7="s|^Tp.*kim$||; s|^\.com$||; s|\-.*\.$||; s|^\.$||; /^$/d";
#_______________________________________________________________________________________________
u00="${Home2Page}/Darias.txt"
u01="http://gg.gg/u01_";u02="http://gg.gg/u02_";u03="http://gg.gg/u03_";u04="http://gg.gg/u04_";u05="http://gg.gg/u05_";
u06="http://gg.gg/u06_";u07="http://gg.gg/u07_";u08="http://gg.gg/u08_";u09="http://gg.gg/u09_";u10="http://gg.gg/u10_";
u11="http://gg.gg/u11_";u12="http://gg.gg/u12_";u13="http://gg.gg/u13_";u14="http://gg.gg/u14_";u15="http://gg.gg/u15_";
u16="http://gg.gg/u16_";u17="http://gg.gg/u17_";u18="http://gg.gg/u18_";u19="http://gg.gg/u19_";u20="http://gg.gg/u20_";
u21="http://gg.gg/u21_";u22="http://gg.gg/u22_";u23="http://gg.gg/u23_";u24="http://gg.gg/u24_";u25="http://gg.gg/u25_";
u26="http://gg.gg/u26_";u27="http://gg.gg/u27_";u28="http://gg.gg/u28_";u29="http://gg.gg/u29_";u30="http://gg.gg/u30_";
u31="http://gg.gg/u31_";u32="http://gg.gg/u32_";u33="http://gg.gg/u33_";u34="http://gg.gg/u34_";u35="http://gg.gg/u35_";
u36="http://gg.gg/u36_";u37="http://gg.gg/u37_";u38="http://gg.gg/u38_";u39="http://gg.gg/u39_";u40="http://gg.gg/u40_";
u41="http://gg.gg/u41_";u42="http://gg.gg/u42_";u43="http://gg.gg/u43_";u44="http://gg.gg/u44_";u45="http://gg.gg/u45_";
u46="http://gg.gg/u46_";u47="http://gg.gg/u47_";u48="http://gg.gg/u48_";u49="http://gg.gg/u49_";u50="http://gg.gg/u50_";
u51="http://gg.gg/u51_";u52="http://gg.gg/u52_";u53="http://gg.gg/u53_";u54="http://gg.gg/u54_";u55="http://gg.gg/u55_";
u56="http://gg.gg/u56_";u57="http://gg.gg/u57_";u58="http://gg.gg/u58_";u59="http://gg.gg/u59_";u60="http://gg.gg/u60_";
u61="http://gg.gg/u61_";u62="http://gg.gg/u62_";u63="http://gg.gg/u63_";u64="http://gg.gg/u64_";u65="http://gg.gg/u65_";
u66="http://gg.gg/u66_";u67="http://gg.gg/u67_";u68="http://gg.gg/u68_";u69="http://gg.gg/u69_";u70="http://gg.gg/u70_";
u71="http://gg.gg/u71_";u72="http://gg.gg/u72_";u73="http://gg.gg/u73_";u74="http://gg.gg/u74_";u75="http://gg.gg/u75_";
u76="http://gg.gg/u76_";u77="http://gg.gg/u77_";u78="http://gg.gg/u78_";u79="http://gg.gg/u79_";u80="http://adblock.mahakala.is/hosts";
u81="http://gg.gg/u81_";u82="http://gg.gg/u82_";u83="http://gg.gg/u83_";u84="http://gg.gg/u84_";u85="http://gg.gg/u85_";
u86="http://gg.gg/u86_";u87="http://gg.gg/u87_";u88="http://gg.gg/u88_";u89="http://gg.gg/u89_";u90="http://gg.gg/u90_";
u91="http://gg.gg/u91_";u92="http://gg.gg/u92_";u93="http://gg.gg/u93_";u94="http://gg.gg/u94_";u95="http://gg.gg/u95_";
u96="http://gg.gg/u96_";u97="http://gg.gg/u97_";u98="http://gg.gg/u98_";u99="http://gg.gg/u99_";u100="http://gg.gg/u100_";
#_______________________________________________________________________________________________
export NOFB=0
export ONLINE=1
export QUIET=0
export SECURL=0
export DAYOFWEEK=$(date +"%u")
export DISTRIB=0
export ThuMuc=""$(cd "$(dirname "${0}")" && pwd)""
export TmTam="${ThuMuc}/tmp"
if [ -d "$TmTam" ]
then
	echo "Using $TmTam"
else
	echo "Creating: $TmTam"
	mkdir ${TmTam}
fi
export hChinh="${ThuMuc}/h";export dChinh="${ThuMuc}/d";
export Tam="${TmTam}/t.tmp"
export File="${TmTam}/File.tmp";export Tam2h="${TmTam}/Total.tmp";
export Tamd="${TmTam}/d.tmp"
export hNgu="${ThuMuc}/h.zzz";export dNgu="${ThuMuc}/d.zzz";
export ScURL="${ThuMuc}/cacert.pem"
export Tambl="${TmTam}/bl.tmp";export Tamwl="${TmTam}/wl.tmp";
export pauseflag="${ThuMuc}/PAUSED"
export denOn="${ThuMuc}/den.On";export trangOn="${ThuMuc}/trang.On";
export denOff="${ThuMuc}/den.Off";export trangOff="${ThuMuc}/trang.Off";
export hLog="${ThuMuc}/h.log"
export SHELL=/bin/sh
export PATH=/bin:/usr/bin:/sbin:/usr/sbin:/jffs/sbin:/jffs/bin:/jffs/usr/sbin:/jffs/usr/bin:/mmc/sbin:/mmc/bin:/mmc/usr/sbin:/mmc/usr/bin:/opt/sbin:/opt/bin:/opt/usr/sbin:/opt/usr/bin:"${ThuMuc}"
export LD_LIBRARY_PATH=/lib:/usr/lib:/jffs/lib:/jffs/usr/lib:/jffs/usr/local/lib:/mmc/lib:/mmc/usr/lib:/opt/lib:/opt/usr/lib
export PWD="${ThuMuc}"
#_______________________________________________________________________________________________
cd "${ThuMuc}"
logger ">>> $(basename "$0") started"
if [ -z "$(which curl)" ]; then
	echo ">>> WARNING: cURL not found"
	echo ">>> ERROR: ABORTING"
	exit 1
fi
alias GetHTT="curl -f -s -k -L"
alias GetSLL="curl -f -s -k -L"
[ $SECURL -eq 1 ] && unalias GetSLL && alias GetSLL="curl -f -s --capath ${ThuMuc} --cacert $ScURL"
alias GetMHK="curl -f -s -A -L "Mozilla/5.0" -e http://forum.xda-developers.com/"
#_______________________________________________________________________________________________
InChu ()
{
	[ $QUIET -eq 0 ] && echo "$1"
	echo "$1" >> $hLog
}
InSize ()
{
	InChu "# Size of $1: `du -h $1 | awk '{print $1}'`"
}
ReBoot ()
{
	logger ">>> $(basename "$0") restarting dnsmasq"
	restart_dns &
	logger ">>> $(basename "$0") restarted dnsmasq"
}
BatChan ()
{
	if [ -f $pauseflag ] && { [ -f $hNgu ] || [ -f $dNgu ]; }; then
		InChu ">>> RESUMING PROTECTION"
		mv $hNgu $hChinh
		mv $dNgu $dChinh
		rm -f $pauseflag
		ReBoot
	fi
	logger ">>> $(basename "$0") finished"
	exit 0
}
TatChan ()
{
	InChu ">>> WARNING: PAUSING PROTECTION"
	[ -f $hChinh ] && mv $hChinh $hNgu
	[ -f $dChinh ] && mv $dChinh $dNgu
	echo "" > $hChinh
	echo "" > $dChinh
	echo "PAUSED" > $pauseflag
	ReBoot
	InChu ">>> Type $(basename "$0") --resume to resume protection."
	logger ">>> $(basename "$0") finished"
	exit 0
}
GiupDo ()
{
	echo ""
	echo "USAGE:"
	printf '\t'; echo "$(basename "$0") [-? | -h | --help] [-v | --version] [-1] [-2] [-b | --bl=<domain.name>] [-w | --wl=<domain.name>] ..."
	echo ""
	echo "OPERATION:"
	printf '\t'; echo -n "[-0]"; printf '\t\t\t\t'; echo "Level=0: safe minimum protection"
	printf '\t'; echo -n "[-1]"; printf '\t\t\t\t'; echo "Level=1: increased protection"
	printf '\t'; echo -n "[-2]"; printf '\t\t\t\t'; echo "Level=2: optimum protection"
	printf '\t'; echo -n "[-3]"; printf '\t\t\t\t'; echo "Level=3: unlock maximum protection"
	printf '\t'; echo -n "[-4]"; printf '\t\t\t\t'; echo "Level=4: unlock Ultra protection [DEFAULT]"
	printf '\t'; echo -n "[-f]"; printf '\t\t\t\t'; echo "Block Facebook and Messenger services"
	printf '\t'; echo -n "[-F]"; printf '\t\t\t\t'; echo "Block Facebook, Messenger, Instagram, WhatsApp"
	printf '\t'; echo -n "[-d | -D]"; printf '\t\t\t'; echo "Ignore denOff/trangOff entries"
	printf '\t'; echo -n "[-b | --bl=]"; printf '\t'; echo -n "domain.name"; printf '\t'; echo "Add domain.name to denOff"
	printf '\t'; echo -n "[-w | --wl=]"; printf '\t'; echo -n "domain.name"; printf '\t'; echo "Add domain.name to trangOff"
	printf '\t'; echo -n "[-i | --ip=]"; printf '\t'; echo -n "ip.ad.dr.ss"; printf '\t'; echo "Send ads to this IP, default: $SetIP"
	printf '\t'; echo -n "[-q | --quiet]"; printf '\t\t\t'; echo "Print outout to log file only"
	printf '\t'; echo -n "[-p | --pause]"; printf '\t\t\t'; echo "Pause protection"
	printf '\t'; echo -n "[-r | --resume]"; printf '\t\t\t'; echo "Resume protection"
	printf '\t'; echo -n "[-s | --secure]"; printf '\t\t\t'; echo "Use cURL CA certs for secure file transfer"
	printf '\t'; echo -n "[-o | --offline]"; printf '\t\t'; echo "Process local lists without downloading"
	printf '\t'; echo -n "[-h | --help]"; printf '\t\t\t'; echo "Display this help screen and exit"
	printf '\t'; echo -n "[-u | --update]"; printf '\t\t\t'; echo "Update $(basename "$0") to the latest version"
	printf '\t'; echo -n "[-v | --version]"; printf '\t\t'; echo "Print $(basename "$0") version and exit"
	echo ""
	echo "EXAMPLES:"
	printf '\t'; echo "$(basename "$0") -s2 --ip=172.31.255.254 --bl=example1.com --wl=example2.com"
	printf '\t'; echo "$(basename "$0") -3Fqs -b example1.com -w example2.com --wl=example3.com"
	echo ""
	logger ">>> $(basename "$0") finished"
	exit 0
}
CapNhat ()
{
	File="${TmTam}/update"
	InChu ">>> Checking for updates..."
	if ping -q -c 1 -W 1 google.com >/dev/null; then
		GetSLL ${Home2Page}/$(basename "$0") > $File
		if [ 0 -eq $? ]; then
			old_md5=`md5sum $0 | cut -d' ' -f1`
			new_md5=`md5sum $File | cut -d' ' -f1`
			if [ "$old_md5" != "$new_md5" ]; then
				NEWVER=`grep -w -m 1 "VERSION" $File`
				InChu ">>> Update available: $NEWVER"
				OLDVER=`grep -w -m 1 "VERSION" $0 | cut -d \" -f2`
				cp $0 $0.$OLDVER
				chmod 755 $File
				mv $File $0
				InChu ">>> Updated to the latest version."
			else
				InChu ">>> Current version: $VERSION"
			fi
		else
			InChu ">>> Update failed. Try again."
		fi
		InChu ">>>> Deleting: $TmTam";rm -rf ${TmTam};
	fi
	logger ">>> $(basename "$0") finished"
	exit 0
}
#_______________________________________________________________________________________________
while getopts "h?v0123fFdDpPqQrRsSoOuUb:w:i:-:" opt; do
	case ${opt} in
		h|\? ) GiupDo ;;
		v    ) echo ">>> Current version: $VERSION" ; logger ">>> $(basename "$0") finished" ;InChu ">>>> Deleting: $TmTam";rm -rf ${TmTam}; exit 0 ;;
		0    ) Level=0 ;;
		1    ) Level=1 ;;
		2    ) Level=2 ;;
		3    ) Level=3 ;;
		f    ) NOFB="f" ;;
		F    ) NOFB="F" ;;
		d|D  ) DISTRIB=1 ;;
		q|Q  ) QUIET=1 ;;
		p|P  ) TatChan ;;
		r|R  ) BatChan ;;
		s|S  ) SECURL=1 ;;
		o|O  ) ONLINE=0 ;;
		u|U  ) CapNhat ;;
		b    ) echo "$OPTARG" >> $denOff ;;
		w    ) echo "$OPTARG" >> $trangOff ;;
		i    ) SetIP="$OPTARG" ;;
		-    ) LONG_OPTARG="${OPTARG#*=}"
		case $OPTARG in
			bl=?*   ) ARG_BL="$LONG_OPTARG" ; echo $ARG_BL >> $denOff ;;
			bl*     ) echo ">>> ERROR: no arguments for --$OPTARG option" >&2; exit 2 ;;
			wl=?*   ) ARG_WL="$LONG_OPTARG" ; echo $ARG_WL >> $trangOff ;;
			wl*     ) echo ">>> ERROR: no arguments for --$OPTARG option" >&2; exit 2 ;;
			ip=?*   ) ARG_IP="$LONG_OPTARG" ; SetIP=$ARG_IP ;;
			ip*     ) echo ">>> ERROR: no arguments for --$OPTARG option" >&2; exit 2 ;;
			4    ) Level=4 ;;
			quiet   ) QUIET=1 ;;
			pause   ) TatChan ;;
			resume  ) BatChan ;;
			secure  ) SECURL=1 ;;
			offline ) ONLINE=0 ;;
			help    ) GiupDo ;;
			update  ) CapNhat ;;
			version ) echo "$VERSION" ; logger ">>> $(basename "$0") finished" ; exit 0 ;;
			4* | quiet* | pause* | resume* | secure* | offline* | help* | update* | version* )
					echo ">>> ERROR: no arguments allowed for --$OPTARG option" >&2; exit 2 ;;
			'' )    break ;;
			* )     echo ">>> ERROR: unsupported option --$OPTARG" >&2; exit 2 ;;
		esac ;;
  	  \? ) exit 2 ;;
	esac
done
shift $((OPTIND-1))
#_______________________________________________________________________________________________
TIMERSTART=`date +%s`
InChu "============================================================="
InChu "|      AdBlock for DD-WRT/Android base on Linux             |"
InChu "|      ${Home1Page}                       |"
InChu "|      Author: Manish Parashar                              |"
InChu "|      Editor: Darias                                       |"
InChu "============================================================="
InChu "             `date`"
InChu "# Version: $VERSION"

#_______________________________________________________________________________________________
if [ -f $pauseflag ] && { [ -f $hNgu ] || [ -f $dNgu ]; }; then
	InChu "# USER FORGOT TO RESUME PROTECTION AFTER PAUSING"
	BatChan
fi
if [ $ONLINE -eq 1 ] && ping -q -c 1 -W 1 google.com >/dev/null; then
	InChu "# NETWORK: UP | MODE: ONLINE"
	InChu "# IP ADDRESS FOR ADS: $SetIP"
	InChu "# SECURE [0=NO | 1=YES]: $SECURL"
	InChu "# Level [0|1|2|3|4]: $Level"
	if [ ! -s cacert.pem ] || { [ "${DAYOFWEEK}" -eq 1 ] || [ "${DAYOFWEEK}" -eq 4 ]; }; then
		InChu "> Downloading / updating cURL certificates"
		GetSLL --remote-name --time-cond cacert.pem https://curl.haxx.se/ca/cacert.pem
	fi
#_______________________________________________________________________________________________
	InChu "# Downloading: Domains";GetSLL ${u00} > $dChinh;InSize $dChinh; cat $dChinh | sed -r 's|.*\=\/||; s|\/.*$||' | sort -u > $Tamd;
#_______________________________________________________________________________________________
	InChu ">>>> Unlocking [0] Hosts"	
	InChu "# Downloading: ${u01}";GetSLL ${u01} > $File;InSize $File;cat $File > $Tam2h;
	InChu "# Downloading: ${u02}";GetSLL ${u02} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u03}";GetSLL -d mimetype=plaintext -d hostformat=dnsmasq ${u03} > $File;InSize $File;cat $File >> $Tam2h | InChu "# Downloading: Main lists";
	InChu "# Downloading: ${u04}";GetSLL ${u04} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u05}";GetSLL ${u05} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u06}";GetSLL ${u06} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u07}";GetSLL ${u07} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u08}";GetSLL ${u08} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u09}";GetSLL ${u09} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u10}";GetSLL ${u10} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u11}";GetSLL ${u11} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u12}";GetSLL ${u12} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u13}";GetSLL ${u13} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u14}";GetSLL ${u14} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u15}";GetSLL ${u15} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u16}";GetSLL ${u16} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u17}";GetSLL ${u17} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u18}";GetSLL ${u18} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u19}";GetSLL ${u19} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# File Size [0] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [0]";
	LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed "${sed6}" > $File;
	InChu "# File Size [0] Formatted"; cat $File > $Tam; InSize $Tam;
#_______________________________________________________________________________________________
	InChu "# Downloading: ${u90}";GetSLL ${u90} > $File;InSize $File;cat $File > $Tam2h;
	InChu "# Downloading: ${u91}";GetSLL ${u91} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u92}";GetSLL ${u92} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u93}";GetSLL ${u93} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u94}";GetSLL ${u94} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u95}";GetSLL ${u95} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u96}";GetSLL ${u96} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u97}";GetSLL ${u97} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u98}";GetSLL ${u98} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# Downloading: ${u99}";GetSLL ${u99} > $File;InSize $File;cat $File >> $Tam2h;
	InChu "# File Size [0.5] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [0.5]";
	LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed -r "${sed00}" | sed -r "${sed01}" | sed 's|\$.*$||' | grep -o '^[^|]*' > $File;
	InChu "# File Size [0.5] Formatted";InSize $File; cat $File >> $Tam;
	InChu "# File Size [1.5]";InSize $Tam;
#_______________________________________________________________________________________________
	if [ $Level -ge 1 ]; then
		InChu ">>>> Unlocking [1] lists"
		InChu "# Downloading: ${u20}";GetSLL ${u20} > $File;InSize $File;cat $File > $Tam2h;
		InChu "# Downloading: ${u21}";GetSLL ${u21} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u22}";GetSLL ${u22} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u23}";GetSLL ${u23} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u24}";GetSLL ${u24} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u25}";GetSLL ${u25} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u26}";GetSLL ${u26} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u27}";GetSLL ${u27} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u28}";GetSLL ${u28} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u29}";GetSLL ${u29} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u30}";GetSLL ${u30} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u31}";GetSLL ${u31} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u32}";GetSLL ${u32} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u33}";GetSLL ${u33} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u34}";GetSLL ${u34} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u35}";GetSLL ${u35} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u36}";GetSLL ${u36} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u37}";GetSLL ${u37} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u38}";GetSLL ${u38} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u39}";GetSLL ${u39} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u40}";GetSLL ${u40} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u41}";GetSLL ${u41} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u42}";GetSLL ${u42} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u43}";GetSLL ${u43} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u44}";GetSLL ${u44} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u45}";GetSLL ${u45} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u46}";GetSLL ${u46} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u47}";GetSLL ${u47} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u48}";GetSLL ${u48} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# File Size [1] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [1]";
		LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed -r "${sed1}" | sed "${sed6}" > $File;
		InChu "# File Size [1] Formatted";InSize $File; cat $File >> $Tam;
		InChu "# File Size [0-1]";InSize $Tam;
	fi
#_______________________________________________________________________________________________
	if [ $Level -ge 2 ]; then
		InChu ">>>> Unlocking [2] lists"
		InChu "# Downloading: ${u49}";GetSLL ${u49} > $File;InSize $File;cat $File > $Tam2h;
		InChu "# Downloading: ${u50}";GetSLL ${u50} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u51}";GetSLL ${u51} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u52}";GetSLL ${u52} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u53}";GetSLL ${u53} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u54}";GetSLL ${u54} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u55}";GetSLL ${u55} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u56}";GetHTT ${u56} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u57}";GetHTT ${u57} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u58}";GetSLL ${u58} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u59}";GetSLL ${u59} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u60}";GetSLL ${u60} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u61}";GetSLL ${u61} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u62}";GetSLL ${u62} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u63}";GetSLL ${u63} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u64}";GetSLL ${u64} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u65}";GetSLL ${u65} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u66}";GetSLL ${u66} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u67}";GetSLL ${u67} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u68}";GetSLL ${u68} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u69}";GetSLL ${u69} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u70}";GetSLL ${u70} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u71}";GetSLL ${u71} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u72}";GetSLL ${u72} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u73}";GetSLL ${u73} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u74}";GetSLL ${u74} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u75}";GetSLL ${u75} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u76}";GetSLL ${u76} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u77}";GetSLL ${u77} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# File Size [2] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [2]";
		LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed -r "${sed2}" | sed "${sed6}" > $File;
		InChu "# File Size [2] Formatted";InSize $File; cat $File >> $Tam;
		InChu "# File Size [0-2]";InSize $Tam;
	fi
#_______________________________________________________________________________________________
	if [ $Level -ge 3 ]; then
		InChu ">>>> Unlocking [3] lists"
		InChu "# Downloading: ${u78}";GetSLL ${u78} > $File;InSize $File;cat $File > $Tam2h;
		InChu "# Downloading: ${u79}";GetSLL ${u79} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u80}";GetMHK ${u80} > $File;InSize $File;cat $File >> $Tam2h;		
		InChu "# Downloading: ${u81}";GetSLL ${u81} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u82}";GetSLL ${u82} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# Downloading: ${u83}";GetSLL ${u83} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# File Size [3] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [3]";
		LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed -r "${sed3}" | sed "${sed6}" > $File;
		InChu "# File Size [3] Formatted";InSize $File; cat $File >> $Tam;
		InChu "# File Size [0-3]";InSize $Tam;
	#_________________________________________________________________________________________________________________________________
	fi
	if [ $Level -eq 4 ]; then
		InChu ">>>> Unlocking [4] lists"
		InChu "# Downloading: ${u84}";GetSLL ${u84} > $File;InSize $File;cat $File > $Tam2h;
		InChu "# Downloading: ${u100}";GetSLL ${u100} > $File;InSize $File;cat $File >> $Tam2h;
		InChu "# File Size [4] Orginal";InSize $Tam2h;InChu ">>>> Deleting Symbol: [4]";
		LC_ALL=C cat $Tam2h | tr '[:upper:]' '[:lower:]' | sed -r "${sed0}" | sed -r "${sed4}" | sed "${sed6}" > $File;
		InChu "# File Size [4] Formatted";InSize $File; cat $File >> $Tam;
		InChu "# File Size [0-4]";InSize $Tam;
	fi
	if [ $NOFB = "f" ]; then
		InChu "# Downloading: ${u85}"
		GetSLL ${Home2Page}/denOn/facebook.only >> $Tam2h;InSize $File;cat $File >> $Tam2h;
	fi
	if [ $NOFB = "F" ]; then
		InChu "# Downloading: ${u86}";GetSLL ${Home2Page}/denOn/facebook.all >> $Tam2h;InSize $File;
		cat $File >> $Tam2h
	fi
	InChu "> Updating Black/WhiteList Online"
	GetSLL ${Home2Page}/denOn/denOn > $denOn;InSize $denOn;
	GetSLL ${Home2Page}/trangOn/trangOn >$File;InSize $File;cat $File > $trangOn;
	GetSLL ${Home2Page}/trangOn/apple >$File;InSize $File;cat $File >> $trangOn;
#_______________________________________________________________________________________________
else
	InChu "# NETWORK: DOWN | MODE: OFFLINE"
	[ -s $hChinh ] && cat $hChinh | awk '{print $2}' > $Tam2h
	[ -s $dChinh ] && cp $dChinh $Tamd
fi
#_______________________________________________________________________________________________
InChu ">>>> Processing: Black/WhiteList Online"
LC_ALL=C cat $denOn | sed -r "${setbw}" | sort -u > $Tambl && cp $Tambl $denOn
LC_ALL=C cat $trangOn | tr '[:upper:]' '[:lower:]' | sed -r "${setbw}" | sort -u > $Tamwl && cp $Tamwl $trangOn
#_______________________________________________________________________________________________
if [ $DISTRIB -eq 0 ] && { [ -s "$denOff" ] || [ -s "$trangOff" ]; }; then
	InChu ">>>> Processing: Black/WhiteList Offline"
	LC_ALL=C cat $denOff | sed -r "${setbw}" | sort -u > tmpmybl && mv tmpmybl $denOff
	LC_ALL=C cat $trangOff | sed -r "${setbw}" | sort -u > tmpmywl && mv tmpmywl $trangOff
	cat $denOn | cat $denOff - > $Tambl
	cat $trangOn | cat $trangOff - | grep -Fvwf $denOff > $Tamwl
fi
#_______________________________________________________________________________________________
InChu "> Processing: Black/WhiteList/SubDomain/IP";
LC_ALL=C cat $Tam | grep -vE "(${SubDM})" | tr -cd '\000-\177' | cat $Tambl - | grep -Fvwf $Tamwl | grep -Fvwf $Tamd | sed -r "${sed7}" | sort -u | awk -v "IP=$SetIP" '{sub(/\r$/,""); print IP" "$0}' > $hChinh
InChu ">>>> File size Hosts";InSize $hChinh;Counts=$(cat $hChinh | wc -l | sed 's/^[ \t]*//');
InChu "# Blocked: $Counts Hosts"
InChu ">>>> File size Domains";InSize $dChinh;Counts=$(cat $dChinh | wc -l | sed 's/^[ \t]*//');
InChu "# Blocked: $Counts Domains"
#_______________________________________________________________________________________________
if [ -f "${ThuMuc}/Location" ]
then
	echo "Skip restart DNS server"
else
	InChu ">>>> Restarting DNS Server (dnsmasq)";ReBoot;
	InChu ">>>> Deleting: $TmTam";rm -rf ${TmTam};
fi
TIMERSTOP=`date +%s`
RTMINUTES=$(( $((TIMERSTOP - TIMERSTART)) /60 ))
RTSECONDS=$(( $((TIMERSTOP - TIMERSTART)) %60 ))
InChu "# Total time: $RTMINUTES:$RTSECONDS minutes"
InChu "# DONE"
logger ">>> $(basename "$0") finished"
exit 0
#_______________________________________________________________________________________________